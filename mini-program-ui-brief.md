# 小程序 UI 说明文档（给 Gemini 生成 UI）

## 1. 目标与范围
- 目标：在微信小程序内复用现有 IP 内容工厂 + 小红书内容生成能力，支持订阅/积分闭环支付。
- 当前范围：IP 工厂工作流、XHS 图文生成 + 封面 + 发布、诊断问卷、订阅/积分与订单。
- 未来范围：视频生成（仅保留入口或占位态）。
- 设备与平台：微信小程序，移动端优先，后续可扩容。

## 2. 目标用户与场景
- 用户：美容院店主/运营/内容编辑。
- 典型场景：快速产出内容、规避平台违规词、生成封面并发布、查看报告/素材库、管理订阅与积分。

## 3. 信息架构（TabBar + 页面列表）
### TabBar
- 工作台：总览、进度、快捷入口。
- IP 工厂：内容工作流、智能体库、报告。
- 小红书：创作、结果、封面、发布。
- 我的：账号、订阅/积分、订单/设置。

### 页面列表（按 Tab 收敛）
- 工作台：总览、进度/下一步推荐、最近报告、快捷入口。
- IP 工厂：工作流列表、步骤详情（P1-P10）、智能体库、智能体对话、报告库/报告详情、素材/包下载。
- 小红书：创作表单、生成结果、风控检测、封面生成/编辑、发布/历史、朋友圈素材。
- 我的：个人资料/绑定微信、订阅与积分、订单/发票、设置/反馈/客服。

### 全局/非 Tab 页面
- 启动/引导页、微信授权登录、注册/找回。
- 营销首页、权益/定价。
- 诊断入口、诊断问卷、诊断结果/下载。
- 支付下单、支付结果、订单详情。

## 4. 关键用户流程
### 登录/授权
启动 -> 微信授权登录 -> 进入工作台（未订阅/积分不足时提示购买）。

### IP 工厂工作流（P1-P10）
工作台 -> 工作流列表 -> 选择步骤 -> 填写/确认输入 -> 生成中 -> 输出结果 -> 保存/下载/进入下一步 -> 报告库查看。

### 小红书内容生成与发布
小红书 Tab -> 选择内容类型 -> 填表/关键词 -> 一键生成 -> 结果页 -> 风控检查 -> 封面生成 -> 发布 -> 发布成功/历史。

### 订阅 + 积分
我的 -> 订阅与积分 -> 选择套餐 -> 微信支付 -> 支付结果 -> 积分到账/权益更新。

### 诊断流程
营销/工作台入口 -> 诊断问卷 -> 结果页 -> 下载报告 -> 引导订阅或进入工作流。

## 5. 页面需求要点（给 UI 设计）
### 工作台
- 模块：欢迎语、剩余积分、工作流进度、最近报告、快捷入口（继续上一步/开始创作/诊断）。
- CTA：继续工作流、开始小红书创作、购买套餐。

### IP 工厂
- 工作流列表：三阶段分组 + 步骤状态（可用/锁定/完成），显示预计耗时与产出物。
- 步骤详情：输入表单 + 生成进度 + 结果输出 + 保存/导出/下一步 CTA。
- 智能体库：分类 + 搜索 + 进入对话。
- 报告库：列表 + 详情 + 下载。

### 小红书
- 创作表单：内容类型（攻略/科普/避雷/对比）、主题、关键词、门店信息、智能填充。
- 结果页：标题/正文/标签展示，复制/重写/再生成。
- 风控：违规词检测结果 + 修改建议。
- 封面：自动封面 + 重新生成 + 轻量编辑。
- 发布：预览 -> 发布 -> 成功状态（链接/二维码）。

### 我的
- 个人资料：头像、昵称、手机号/微信绑定。
- 订阅与积分：当前套餐、剩余积分、升级/续费 CTA。
- 订单：订单列表、详情、发票/客服入口。
- 设置：通知、偏好、反馈。

### 全局页面
- 登录/注册：微信授权 + 简洁提示。
- 诊断：问卷步骤、结果页、下载入口。
- 支付：套餐列表、支付结果页。

## 6. 数据与接口对接（前端仅需调用后端）
### IP 工厂（现有站点 API）
- `POST /api/chat`：内容生成（有订阅/积分校验）。
- `GET /api/prompts`：提示词列表/预览。
- `POST /api/diagnosis`、`POST /api/diagnosis/generate`、`GET /api/diagnosis/{id}`：诊断流程。
- `GET /api/download/{packId}`、`GET /api/packs/{packId}/download`：包/素材下载。

### 小红书（https://www.ai-meirong.com）
- `POST /api/generate-content`、`POST /api/generate-title`：文案生成。
- `POST /api/content/smart-generate`：智能填充。
- `POST /api/content/danger-check`：风控检测。
- `GET /api/keywords/*`、`GET /api/keywords/combinations`：关键词推荐。
- `POST /api/generate-cover-image`：封面生成（Nano Banana 2）。
- `POST /api/publish-note`：发布小红书笔记。

### 支付/订阅
- `GET /api/wechatpay/products`：套餐列表。
- 小程序需 JSAPI 支付（后端提供 `prepay_id` + 签名，前端 `wx.requestPayment`）。

## 7. 权限与状态处理
- 未登录：限制生成/下载，弹出登录引导。
- 积分不足：在关键 CTA 前提示购买套餐。
- 生成中：显示进度与可取消/重试。
- 失败：给出错误原因与重试入口。

## 8. 设计与交互提示（给 Gemini）
- 视觉：B2B 专业感 + 美业属性，信息层级清晰，强调“效率/稳定/可复用”。
- 交互：清晰的主 CTA（继续工作流/一键生成/立即发布），弱化次级操作。
- 状态：每个生成页面必须有空态/加载态/错误态/完成态。
- 适配：小程序安全区 + 底部 TabBar 固定；文案长度适配移动端。
- 视频生成：仅保留入口或“即将上线”占位，不做完整流程。
